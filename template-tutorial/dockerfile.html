<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Dockerfile :: Containers Tutorial</title>
    <link rel="canonical" href="https://redhat-scholars.github.io/containers-tutorial/template-tutorial/dockerfile.html">
    <link rel="prev" href="setup.html">
    <link rel="next" href="#buildingimages.adoc">
    <meta name="generator" content="Antora 2.3.3">
    <link rel="stylesheet" href="../_/css/site.css">
<link rel="icon" href="../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img
          src="../_/img/header_logo.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" href="https://redhat-scholars.github.io/containers-tutorial">Containers Tutorial</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Books</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">CheatSheets</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">CheatSheet A</a>
            <a class="navbar-item" href="#">CheatSheet B</a>
            <a class="navbar-item" href="#">CheatSheet C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Upcoming Events</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Event A</a>
            <a class="navbar-item" href="#">Event B</a>
            <a class="navbar-item" href="#">Event C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Tutorial A</a>
            <a class="navbar-item" href="#">Tutorial B</a>
            <a class="navbar-item" href="#">Tutorial C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="template-tutorial" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">containers-tutorial</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Requirements</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="setup.html">Setup</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Basics</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="dockerfile.html">Dockerfile</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#buildingimages.adoc">Building images</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#runningcontainers.adoc">Running containers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#ports.adoc">Ports</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#volumes.adoc">Volumes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#logs.adoc">Logs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#insidecontainer.adoc">Inside a container</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#pushing.adoc">Pushing image to public registry</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">containers-tutorial</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">containers-tutorial</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">containers-tutorial</a></li>
    <li>Basics</li>
    <li><a href="dockerfile.html">Dockerfile</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/redhat-scholars/containers-tutorial/edit/master/documentation/modules/ROOT/pages/dockerfile.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Dockerfile</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>A Dockerfile is where you&#8217;ll stabilish the definitions used to build a container image. It uses three main keywords/commands:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>FROM: where you&#8217;ll inform the base image used to build your own image</p>
</li>
<li>
<p>ADD: where you&#8217;ll add resources (files) to your image</p>
</li>
<li>
<p>CMD: where you&#8217;ll inform how to start the application</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_building_a_dockerfile"><a class="anchor" href="#_building_a_dockerfile"></a>Building a Dockerfile</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First create a file named Dockerfile.</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">touch Dockerfile</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now open it in you favorite editor and this very first line:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">FROM registry.access.redhat.com/ubi8/ubi-minimal:8.1</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_build_and_run_the_quarkus_application"><a class="anchor" href="#_build_and_run_the_quarkus_application"></a>Build and Run the Quarkus Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Unresolved include directive in modules/ROOT/pages/dockerfile.adoc - include::ROOT:partial$compile-and-run.adoc[]</p>
</div>
<div class="paragraph">
<p>Notice how <strong>fast</strong> Quarkus was ready to serve your requests. In this particular example Quarkus only required <strong>0.016s</strong> to start.</p>
</div>
<div class="paragraph">
<p>You can open your browser with the url <code><a href="http://localhost:8080/hello" class="bare" target="_blank" rel="noopener">http://localhost:8080/hello</a></code> and you should see a response like <code>hello</code>.</p>
</div>
<div class="paragraph">
<p>Or else if you&#8217;re a CLI person, you can run a <code>curl</code> command like:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl localhost:8080/hello</code></pre>
</div>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">hello</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_stopping_the_application"><a class="anchor" href="#_stopping_the_application"></a>Stopping the application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can stop your running application by issuing a <code>CTRL+C</code> in your terminal.</p>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">^C2020-05-10 23:11:03,419 INFO  [io.quarkus] (main) tutorial-app stopped in 0.007s</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quarkus was able to stop in just <strong>0.007s</strong>. Fast to start, fast to stop. Fast always!</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_testing_your_application"><a class="anchor" href="#_testing_your_application"></a>Testing your application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The scaffolding process also creates a test case for the example endpoint.</p>
</div>
<div class="paragraph">
<p>Check the file <code>FruitResourceTest.java</code> in the folder <code>src/test/java</code> to see how a Quarkus integration test looks like.</p>
</div>
<div class="paragraph">
<p>When running this test, the application is started once, then all tests are executed, and finally, the application is stopped. Although it is not mandatory, by default RestAssured project is used to test Rest endpoints but it is up to you to change that.</p>
</div>
<div class="paragraph">
<p>You can run the test in your IDE or by running Maven:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./mvnw clean test</code></pre>
</div>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running com.redhat.developers.HelloResourceTest
2020-05-11 21:28:53,566 INFO  [io.quarkus] (main) Quarkus 1.4.2.Final started in 1.636s. Listening on: http://0.0.0.0:8081
2020-05-11 21:28:53,568 INFO  [io.quarkus] (main) Profile test activated.
2020-05-11 21:28:53,568 INFO  [io.quarkus] (main) Installed features: [cdi, resteasy]
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 5.525 s - in com.redhat.developers.HelloResourceTest
2020-05-11 21:28:55,158 INFO  [io.quarkus] (main) Quarkus stopped in 0.040s
[INFO]
[INFO] Results:
[INFO]
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  11.942 s
[INFO] Finished at: 2020-05-11T21:28:55-04:00
[INFO] ------------------------------------------------------------------------</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_open_the_project_in_your_ide"><a class="anchor" href="#_open_the_project_in_your_ide"></a>Open the Project in your IDE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Open or import the generated project into your IDE.</p>
</div>
<div class="paragraph">
<p>If you are using <strong>vscode</strong> you can open the project with:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">code .</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you use <code>tutorial-tools</code>, your host <code>quarkus-tutorial/work</code> contains the application code; point your IDE to this directory.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_live_coding_development_mode"><a class="anchor" href="#_live_coding_development_mode"></a>Live Coding (Development mode)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Stop the Quarkus application that might be running in <code>jvm</code> or <code>native</code> mode.</p>
</div>
<div class="paragraph">
<p><em>Live Coding</em> or <em>Development mode</em> enables hot deployment with background compilation, which means that when you modify your Java files and/or your resource files and refresh your browser, these changes will automatically take effect.</p>
</div>
<div class="paragraph">
<p>This is probably one of the best features of Quarkus: enabling a very fast and productive iterative feedback loop.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s start the <em>Live Coding</em> mode by invoking <code>mvn</code>. You probably won&#8217;t need to stop/start Quarkus again during this tutorial:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./mvnw quarkus:dev</code></pre>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="setup.html">Setup</a></span>
  <span class="next"><a href="#buildingimages.adoc">Building images</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../_/js/vendor/clipboard.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
